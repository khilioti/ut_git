
Процедура ПередЗаписью(Отказ)
	
	Если Ссылка.ПометкаУдаления = Ложь  И ПометкаУдаления Тогда
		Запрос = Новый Запрос;
		Запрос.Текст = 
			"ВЫБРАТЬ
			|	ЛистОбратнойСвязиHRРезультаты.Ссылка,
			|	ЛистОбратнойСвязиHRРезультаты.ЗадачаУправляющему
			|ИЗ
			|	Документ.ЛистОбратнойСвязиHR.Результаты КАК ЛистОбратнойСвязиHRРезультаты
			|ГДЕ
			|	ЛистОбратнойСвязиHRРезультаты.Критерий = &Критерий
			|	И ЛистОбратнойСвязиHRРезультаты.ЗадачаУправляющему <> ЗНАЧЕНИЕ(Задача.ЗадачаИсполнителя.ПустаяСсылка)";
		
		Запрос.УстановитьПараметр("Критерий", Ссылка);
		
		РезультатЗапроса = Запрос.Выполнить();
		
		ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
		
		Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
			Сообщить(ВыборкаДетальныеЗаписи.ЗадачаУправляющему);
			ВыборкаДетальныеЗаписи.ЗадачаУправляющему.ПолучитьОбъект().Удалить();
		КонецЦикла;
	КонецЕсли;

	
	Наименование = ПолнНаименование;
КонецПроцедуры
